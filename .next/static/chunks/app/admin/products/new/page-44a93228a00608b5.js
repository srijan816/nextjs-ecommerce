(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9770],{8099:(e,t,r)=>{Promise.resolve().then(r.bind(r,5107))},6046:(e,t,r)=>{"use strict";var s=r(6658);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},5107:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(5155),o=r(2115),a=r(6046),i=r(8173),n=r.n(i),c=r(2615),d=r(3681),l=r(3697),u=r(9615);function m(){var e;let t=(0,a.useRouter)(),{data:r,status:i}=(0,c.useSession)(),[m,g]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1),{addProduct:f}=(0,u.Q)(),[x,b]=(0,o.useState)({name:"",description:"",category:"electronics",categoryName:"Electronics",price:"",image:"",stock:"100",isFeatured:!1,isOnSale:!1});if((0,o.useEffect)(()=>{var e;if("loading"!==i){if("unauthenticated"===i){t.push("/sign-in?callbackUrl=/admin/products/new");return}if((null==r?void 0:null===(e=r.user)||void 0===e?void 0:e.role)!==d.X.ADMIN){t.push("/");return}g(!0)}},[r,i,t]),!m||"loading"===i)return(0,s.jsx)("div",{className:"container mx-auto flex h-[50vh] items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mb-4 h-12 w-12 animate-spin rounded-full border-4 border-gray-300 border-t-gray-900 mx-auto"}),(0,s.jsx)("p",{className:"text-lg text-gray-600",children:"Loading..."})]})});if("unauthenticated"===i||(null==r?void 0:null===(e=r.user)||void 0===e?void 0:e.role)!==d.X.ADMIN)return null;let y=e=>{let{name:t,value:r,type:s}=e.target;if("checkbox"===s){let r=e.target.checked;b(e=>({...e,[t]:r}))}else b(e=>({...e,[t]:r}))},N=async e=>{e.preventDefault(),p(!0);try{let e={id:(0,l.A)(),...x,price:parseFloat(x.price),stock:parseInt(x.stock),images:[x.image]};f(e),alert("Product created successfully!"),t.push("/admin/dashboard")}catch(e){console.error("Error creating product:",e),alert("Failed to create product. Please try again.")}finally{p(!1)}};return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Create New Product"}),(0,s.jsx)(n(),{href:"/admin/dashboard",className:"text-sm text-gray-600 hover:underline",children:"← Back to Dashboard"})]}),(0,s.jsxs)("form",{onSubmit:N,className:"mx-auto max-w-2xl bg-white p-6 rounded-lg shadow-md",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"name",className:"mb-2 block text-sm font-medium text-gray-700",children:"Product Name *"}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",value:x.name,onChange:y,required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:outline-none focus:ring-indigo-500"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"description",className:"mb-2 block text-sm font-medium text-gray-700",children:"Description"}),(0,s.jsx)("textarea",{id:"description",name:"description",value:x.description,onChange:y,rows:4,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:outline-none focus:ring-indigo-500"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"category",className:"mb-2 block text-sm font-medium text-gray-700",children:"Category"}),(0,s.jsxs)("select",{id:"category",name:"category",value:x.category,onChange:e=>{let t=e.target.value,r="Electronics";switch(t){case"clothing":r="Clothing";break;case"home-kitchen":r="Home & Kitchen";break;case"beauty":r="Beauty";break;case"fitness":r="Fitness"}b(e=>({...e,category:t,categoryName:r}))},className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:outline-none focus:ring-indigo-500",children:[(0,s.jsx)("option",{value:"electronics",children:"Electronics"}),(0,s.jsx)("option",{value:"clothing",children:"Clothing"}),(0,s.jsx)("option",{value:"home-kitchen",children:"Home & Kitchen"}),(0,s.jsx)("option",{value:"beauty",children:"Beauty"}),(0,s.jsx)("option",{value:"fitness",children:"Fitness"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"price",className:"mb-2 block text-sm font-medium text-gray-700",children:"Price *"}),(0,s.jsx)("input",{type:"number",id:"price",name:"price",value:x.price,onChange:y,required:!0,step:"0.01",min:"0",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:outline-none focus:ring-indigo-500"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"image",className:"mb-2 block text-sm font-medium text-gray-700",children:"Image URL"}),(0,s.jsx)("input",{type:"text",id:"image",name:"image",value:x.image,onChange:y,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:outline-none focus:ring-indigo-500",placeholder:"https://example.com/image.jpg"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Enter a valid image URL. For testing, you can use Unsplash images."})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"stock",className:"mb-2 block text-sm font-medium text-gray-700",children:"Stock"}),(0,s.jsx)("input",{type:"number",id:"stock",name:"stock",value:x.stock,onChange:y,min:"0",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:outline-none focus:ring-indigo-500"})]}),(0,s.jsxs)("div",{className:"mb-4 flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"isFeatured",name:"isFeatured",checked:x.isFeatured,onChange:y,className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,s.jsx)("label",{htmlFor:"isFeatured",className:"ml-2 text-sm text-gray-700",children:"Featured Product"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"isOnSale",name:"isOnSale",checked:x.isOnSale,onChange:y,className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,s.jsx)("label",{htmlFor:"isOnSale",className:"ml-2 text-sm text-gray-700",children:"On Sale"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end",children:[(0,s.jsx)("button",{type:"button",onClick:()=>t.push("/admin/dashboard"),className:"mr-4 rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:h,className:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700 disabled:opacity-50",children:h?"Creating...":"Create Product"})]})]})]})}},3681:(e,t,r)=>{"use strict";r.d(t,{X:()=>s});var s=function(e){return e.USER="USER",e.ADMIN="ADMIN",e}({})},9615:(e,t,r)=>{"use strict";r.d(t,{ProductProvider:()=>n,Q:()=>c});var s=r(5155),o=r(2115);let a=(0,o.createContext)(void 0),i=[{id:"1",name:"Wireless Headphones",description:"Premium wireless headphones with noise cancellation",price:199.99,category:"electronics",categoryName:"Electronics",image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&auto=format&fit=crop&q=60",stock:100,isFeatured:!0,isOnSale:!1},{id:"2",name:"Smart Watch",description:"Track your fitness and stay connected",price:249.99,category:"electronics",categoryName:"Electronics",image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&auto=format&fit=crop&q=60",stock:50,isFeatured:!1,isOnSale:!0}];function n(e){let{children:t}=e,[r,n]=(0,o.useState)([]);return(0,o.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("products");e?n(JSON.parse(e)):(n(i),localStorage.setItem("products",JSON.stringify(i)))}catch(e){console.error("Error loading products:",e),n(i)}})()},[]),(0,o.useEffect)(()=>{let e=localStorage.getItem("adminUpdatedProducts");if(e)try{let t=JSON.parse(e),s=[...r];t.forEach(e=>{let t=s.findIndex(t=>t.id===e.id);-1!==t?s[t]=e:s.push(e)}),n(s),localStorage.setItem("products",JSON.stringify(s)),localStorage.removeItem("adminUpdatedProducts")}catch(e){console.error("Error syncing admin products:",e)}},[r]),(0,s.jsx)(a.Provider,{value:{products:r,addProduct:e=>{let t=[...r,e];n(t),localStorage.setItem("products",JSON.stringify(t))},updateProduct:e=>{let t=r.map(t=>t.id===e.id?e:t);n(t),localStorage.setItem("products",JSON.stringify(t))},deleteProduct:e=>{let t=r.filter(t=>t.id!==e);n(t),localStorage.setItem("products",JSON.stringify(t))},getProduct:e=>r.find(t=>t.id===e),refreshProducts:()=>{try{let e=localStorage.getItem("products");e&&n(JSON.parse(e))}catch(e){console.error("Error refreshing products:",e)}}},children:t})}function c(){let e=(0,o.useContext)(a);if(void 0===e)throw Error("useProducts must be used within a ProductProvider");return e}},3697:(e,t,r)=>{"use strict";let s;r.d(t,{A:()=>n});let o={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},a=new Uint8Array(16),i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));let n=function(e,t,r){if(o.randomUUID&&!t&&!e)return o.randomUUID();let n=(e=e||{}).random??e.rng?.()??function(){if(!s){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");s=crypto.getRandomValues.bind(crypto)}return s(a)}();if(n.length<16)throw Error("Random bytes length must be >= 16");if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}(n)}}},e=>{var t=t=>e(e.s=t);e.O(0,[8173,2615,8441,1517,7358],()=>t(8099)),_N_E=e.O()}]);