(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3571],{6892:(e,t,r)=>{Promise.resolve().then(r.bind(r,9250))},9250:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var a=r(5155),s=r(2115),o=r(8173),i=r.n(o),n=r(5565),l=r(2615),c=r(3681),d=r(9615),u=r(7334);function m(){let{products:e}=(0,d.Q)(),{data:t}=(0,l.useSession)(),{addItem:r}=(0,u.x)(),[o,m]=(0,s.useState)(1),[g,p]=(0,s.useState)(""),[h,f]=(0,s.useState)("name"),[x,v]=(0,s.useState)("asc"),y=e.filter(e=>""===g||e.name.toLowerCase().includes(g.toLowerCase())||e.description.toLowerCase().includes(g.toLowerCase())||e.categoryName.toLowerCase().includes(g.toLowerCase())).sort((e,t)=>{let r=e[h],a=t[h];return"string"==typeof r&&"string"==typeof a?"asc"===x?r.localeCompare(a):a.localeCompare(r):"asc"===x?Number(r)-Number(a):Number(a)-Number(r)}),b=Math.ceil(y.length/12),w=y.slice((o-1)*12,12*o),N=e=>{m(e),window.scrollTo({top:0,behavior:"smooth"})},j=(e,t)=>{e.preventDefault(),e.stopPropagation(),r({id:"".concat(t.id,"-").concat(Date.now()),productId:t.id,name:t.name,price:"string"==typeof t.price?parseFloat(t.price):t.price,image:t.image,quantity:1})};return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"mb-8 text-3xl font-bold",children:"All Products"}),(0,a.jsxs)("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search products...",value:g,onChange:e=>{p(e.target.value),m(1)},className:"w-full rounded-md border border-gray-300 pl-10 pr-4 py-2 focus:border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-500 sm:w-64"}),(0,a.jsx)("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("label",{htmlFor:"sort",className:"text-sm font-medium text-gray-700",children:"Sort by:"}),(0,a.jsxs)("select",{id:"sort",value:"".concat(h,"-").concat(x),onChange:e=>{let t=e.target.value;"price-asc"===t?(f("price"),v("asc")):"price-desc"===t?(f("price"),v("desc")):"name-asc"===t?(f("name"),v("asc")):"name-desc"===t&&(f("name"),v("desc"))},className:"rounded-md border border-gray-300 py-2 pl-3 pr-10 focus:border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-500",children:[(0,a.jsx)("option",{value:"name-asc",children:"Name (A-Z)"}),(0,a.jsx)("option",{value:"name-desc",children:"Name (Z-A)"}),(0,a.jsx)("option",{value:"price-asc",children:"Price (Low to High)"}),(0,a.jsx)("option",{value:"price-desc",children:"Price (High to Low)"})]})]})]}),0===y.length?(0,a.jsx)("div",{className:"my-12 text-center",children:(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"No products found matching your criteria."})}):(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:w.map(e=>{var r;return(0,a.jsxs)(i(),{href:"/products/".concat(e.id),className:"group overflow-hidden rounded-lg border bg-white transition-all hover:shadow-md",children:[(0,a.jsxs)("div",{className:"aspect-square w-full relative bg-gray-100",children:[e.image&&(0,a.jsx)(n.default,{src:e.image,alt:e.name,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",className:"object-cover"}),(null==t?void 0:null===(r=t.user)||void 0===r?void 0:r.role)===c.X.ADMIN&&(0,a.jsx)("div",{className:"absolute right-2 top-2 z-10",onClick:e=>e.stopPropagation(),children:(0,a.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),window.location.href="/admin/products/edit/".concat(e.id)},className:"flex h-8 w-8 items-center justify-center rounded-full bg-white shadow-md hover:bg-gray-100",children:(0,a.jsx)("svg",{className:"h-4 w-4 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:e.name}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-lg font-bold",children:["$","string"==typeof e.price?parseFloat(e.price).toFixed(2):e.price.toFixed(2)]}),(0,a.jsx)("button",{onClick:t=>j(t,e),className:"rounded-md bg-gray-900 px-3 py-1.5 text-sm font-medium text-white hover:bg-gray-800",children:"Add to Cart"})]})]})]},e.id)})}),b>1&&(0,a.jsx)("div",{className:"mt-8 flex justify-center",children:(0,a.jsxs)("nav",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>N(Math.max(1,o-1)),disabled:1===o,className:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),Array.from({length:b},(e,t)=>t+1).map(e=>(0,a.jsx)("button",{onClick:()=>N(e),className:"rounded-md px-3 py-2 text-sm font-medium ".concat(o===e?"bg-gray-900 text-white":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50"),children:e},e)),(0,a.jsx)("button",{onClick:()=>N(Math.min(b,o+1)),disabled:o===b,className:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})}},3681:(e,t,r)=>{"use strict";r.d(t,{X:()=>a});var a=function(e){return e.USER="USER",e.ADMIN="ADMIN",e}({})},9615:(e,t,r)=>{"use strict";r.d(t,{ProductProvider:()=>n,Q:()=>l});var a=r(5155),s=r(2115);let o=(0,s.createContext)(void 0),i=[{id:"1",name:"Wireless Headphones",description:"Premium wireless headphones with noise cancellation",price:199.99,category:"electronics",categoryName:"Electronics",image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&auto=format&fit=crop&q=60",stock:100,isFeatured:!0,isOnSale:!1},{id:"2",name:"Smart Watch",description:"Track your fitness and stay connected",price:249.99,category:"electronics",categoryName:"Electronics",image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&auto=format&fit=crop&q=60",stock:50,isFeatured:!1,isOnSale:!0}];function n(e){let{children:t}=e,[r,n]=(0,s.useState)([]);return(0,s.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("products");e?n(JSON.parse(e)):(n(i),localStorage.setItem("products",JSON.stringify(i)))}catch(e){console.error("Error loading products:",e),n(i)}})()},[]),(0,s.useEffect)(()=>{let e=localStorage.getItem("adminUpdatedProducts");if(e)try{let t=JSON.parse(e),a=[...r];t.forEach(e=>{let t=a.findIndex(t=>t.id===e.id);-1!==t?a[t]=e:a.push(e)}),n(a),localStorage.setItem("products",JSON.stringify(a)),localStorage.removeItem("adminUpdatedProducts")}catch(e){console.error("Error syncing admin products:",e)}},[r]),(0,a.jsx)(o.Provider,{value:{products:r,addProduct:e=>{let t=[...r,e];n(t),localStorage.setItem("products",JSON.stringify(t))},updateProduct:e=>{let t=r.map(t=>t.id===e.id?e:t);n(t),localStorage.setItem("products",JSON.stringify(t))},deleteProduct:e=>{let t=r.filter(t=>t.id!==e);n(t),localStorage.setItem("products",JSON.stringify(t))},getProduct:e=>r.find(t=>t.id===e),refreshProducts:()=>{try{let e=localStorage.getItem("products");e&&n(JSON.parse(e))}catch(e){console.error("Error refreshing products:",e)}}},children:t})}function l(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useProducts must be used within a ProductProvider");return e}},7334:(e,t,r)=>{"use strict";r.d(t,{x:()=>o});var a=r(9827),s=r(709);let o=(0,a.v)()((0,s.Zr)((e,t)=>({items:[],addItem:r=>{let{items:a}=t();a.find(e=>e.productId===r.productId&&e.variantId===r.variantId)?e({items:a.map(e=>e.productId===r.productId&&e.variantId===r.variantId?{...e,quantity:e.quantity+r.quantity}:e)}):e({items:[...a,r]})},removeItem:r=>{let{items:a}=t();e({items:a.filter(e=>e.id!==r)})},updateQuantity:(r,a)=>{let{items:s}=t();e({items:s.map(e=>e.id===r?{...e,quantity:a}:e)})},clearCart:()=>e({items:[]}),getTotalItems:()=>{let{items:e}=t();return e.reduce((e,t)=>e+t.quantity,0)},getTotalPrice:()=>{let{items:e}=t();return e.reduce((e,t)=>e+t.price*t.quantity,0)}}),{name:"cart-storage"}))},709:(e,t,r)=>{"use strict";r.d(t,{Zr:()=>s});let a=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>a(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>a(t)(e)}}},s=(e,t)=>(r,s,o)=>{let i,n={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let a=e=>null===e?null:JSON.parse(e,void 0),s=null!=(t=r.getItem(e))?t:null;return s instanceof Promise?s.then(a):a(s)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},l=!1,c=new Set,d=new Set,u=n.storage;if(!u)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),r(...e)},s,o);let m=()=>{let e=n.partialize({...s()});return u.setItem(n.name,{state:e,version:n.version})},g=o.setState;o.setState=(e,t)=>{g(e,t),m()};let p=e((...e)=>{r(...e),m()},s,o);o.getInitialState=()=>p;let h=()=>{var e,t;if(!u)return;l=!1,c.forEach(e=>{var t;return e(null!=(t=s())?t:p)});let o=(null==(t=n.onRehydrateStorage)?void 0:t.call(n,null!=(e=s())?e:p))||void 0;return a(u.getItem.bind(u))(n.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===n.version)return[!1,e.state];if(n.migrate){let t=n.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[a,o]=e;if(r(i=n.merge(o,null!=(t=s())?t:p),!0),a)return m()}).then(()=>{null==o||o(i,void 0),i=s(),l=!0,d.forEach(e=>e(i))}).catch(e=>{null==o||o(void 0,e)})};return o.persist={setOptions:e=>{n={...n,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>h(),hasHydrated:()=>l,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},n.skipHydration||h(),i||p}},9827:(e,t,r)=>{"use strict";r.d(t,{v:()=>l});var a=r(2115);let s=e=>{let t;let r=new Set,a=(e,a)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,o={setState:a,getState:s,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e))},i=t=e(a,s,o);return o},o=e=>e?s(e):s,i=e=>e,n=e=>{let t=o(e),r=e=>(function(e,t=i){let r=a.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return a.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},l=e=>e?n(e):n}},e=>{var t=t=>e(e.s=t);e.O(0,[8173,2615,5565,8441,1517,7358],()=>t(6892)),_N_E=e.O()}]);